using System;
using System.Threading.Tasks;

namespace TaskDistributer
{
    public struct ManagerWorkInfo
    {
        private ClientOrderInfo _clientOrderInfo;

        //--------------------------------------------------------------------------------------------------------------------------------------
        //--------------------------------------------------------------------------------------------------------------------------------------

        public ManagerWorkInfo(ClientOrderInfo orderInfo)
        {
            _clientOrderInfo = orderInfo;
        }

        //--------------------------------------------------------------------------------------------------------------------------------------
        //--------------------------------------------------------------------------------------------------------------------------------------

        public ClientOrderInfo ClientOrderInfo
        {
            get
            {
                return _clientOrderInfo;
            }
        }

        //--------------------------------------------------------------------------------------------------------------------------------------
        //--------------------------------------------------------------------------------------------------------------------------------------

        public override string ToString()
        {
            return $"{_clientOrderInfo}";
        }
    }


    class WorkManager
    {
        private ClientOrderManager _manager;

        //--------------------------------------------------------------------------------------------------------------------------------------
        //--------------------------------------------------------------------------------------------------------------------------------------

        public WorkManager()
        {
            _manager = new ClientOrderManager();
        }

        //--------------------------------------------------------------------------------------------------------------------------------------
        //--------------------------------------------------------------------------------------------------------------------------------------


        public async Task<ManagerWorkInfo> DoArrangment()
        {
            var clientInfo = _manager.Manage(20);

            await Task.WhenAll(clientInfo, Task.Delay(TimeSpan.FromSeconds(2)));

            return new ManagerWorkInfo(clientInfo.Result);

        }
    }
}
